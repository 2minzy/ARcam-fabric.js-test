(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t){},"06da":function(e,t,a){e.exports=a.p+"img/sticker-0-4.60623acb.svg"},"0a40":function(e,t,a){e.exports=a.p+"img/sticker-0-3.3e29dc01.png"},"0f47":function(e,t,a){},1:function(e,t){},"10dd":function(e,t,a){"use strict";a.d(t,"f",(function(){return r}));var c=a("5502"),n=a("7a23");a.d(t,"d",(function(){return n["y"]})),a.d(t,"e",(function(){return n["z"]})),a.d(t,"a",(function(){return n["b"]})),a.d(t,"b",(function(){return n["s"]})),a.d(t,"c",(function(){return n["t"]}));var r=function(){var e=Object(c["b"])();return{state:e.state,get:e.getters,commit:e.commit,dispatch:e.dispatch}}},"164e":function(e,t,a){"use strict";a("16b6")},"16b6":function(e,t,a){},"1bef":function(e,t,a){"use strict";a("6572")},2:function(e,t){},"273b":function(e,t,a){e.exports=a.p+"img/sticker-0-1.5fefd5a3.svg"},"2aad":function(e,t,a){e.exports=a.p+"img/sticker-2-1.216cdc38.svg"},"2b18":function(e,t,a){e.exports=a.p+"img/barcelona.d9bcbb54.jpg"},3:function(e,t,a){e.exports=a("56d7")},3541:function(e,t,a){e.exports=a.p+"img/sticker-1-0.480f7af1.svg"},5297:function(e,t,a){"use strict";a("e4f9")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var c=a("7a23"),n={id:"nav"},r=Object(c["i"])("captureFabric"),i=Object(c["i"])(" | "),s=Object(c["i"])("captureFabricTest"),o=Object(c["i"])(" | "),u=Object(c["i"])("facingMode"),d=Object(c["i"])(" | "),l=Object(c["i"])("LandingPage"),f=Object(c["i"])(" | "),b=Object(c["i"])("EditPage");function m(e,t,a,m,v,p){var g=Object(c["B"])("router-link"),h=Object(c["B"])("router-view");return Object(c["u"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("div",n,[Object(c["j"])(g,{to:"/captureFabric"},{default:Object(c["H"])((function(){return[r]})),_:1}),i,Object(c["j"])(g,{to:"/captureFabricTest"},{default:Object(c["H"])((function(){return[s]})),_:1}),o,Object(c["j"])(g,{to:"/facingMode"},{default:Object(c["H"])((function(){return[u]})),_:1}),d,Object(c["j"])(g,{to:"/landing"},{default:Object(c["H"])((function(){return[l]})),_:1}),f,Object(c["j"])(g,{to:"/edit"},{default:Object(c["H"])((function(){return[b]})),_:1})]),Object(c["j"])(h)],64)}var v=a("10dd"),p={name:"Home",setup:function(){var e=Object(v["f"])(),t=(e.state,e.commit,e.dispatch),a=Object(v["d"])({}),c={};return Object(v["b"])((function(){t("init")})),{data:a,methods:c}}};a("5297");p.render=m;var g=p,h=(a("d3b7"),a("3ca3"),a("ddb0"),a("6c02")),_={class:"home"},j=Object(c["g"])("h1",null,"Homeeeeee",-1);function O(e,t,a,n,r,i){var s=Object(c["B"])("CaptureFabric");return Object(c["u"])(),Object(c["f"])("div",_,[Object(c["j"])(s),j])}a("7a94");var k=a("cd82"),w=a("6ce6"),C={name:"Home",components:{CaptureFabricTest:k["default"],CaptureFabric:w["default"]},setup:function(){var e=Object(c["y"])({}),t={};return Object(c["s"])((function(){})),{data:e,methods:t}}};C.render=O;var y=C,S=[{path:"/",name:"Home",component:y},{path:"/captureFabric",name:"captureFabric",component:function(){return Promise.resolve().then(a.bind(null,"6ce6"))}},{path:"/captureFabricTest",name:"captureFabricTest",component:function(){return Promise.resolve().then(a.bind(null,"cd82"))}},{path:"/facingMode",name:"facingMode",component:function(){return a.e("chunk-a266daf0").then(a.bind(null,"1c31"))}},{path:"/landing",name:"landing",component:function(){return a.e("chunk-7ef79da2").then(a.bind(null,"2e35"))}},{path:"/edit",name:"edit",component:function(){return a.e("chunk-2b816fba").then(a.bind(null,"abc6"))}}],I=Object(h["a"])({history:Object(h["b"])("/ARcam-fabric.js-test/"),routes:S}),x=I,E=a("1da1"),A=(a("96cf"),a("b0c0"),a("5502")),R=Object(A["a"])({state:{stickers:[],userInfo:{userId:0,userImage:null,stickers:[{id:"0-0",width:null,height:null,left:null,top:null,scaleX:null,scaleY:null,angle:null}]},inputInfo:{name:"",type:[],message:""}},mutations:{init:function(e,t){e.stickers=t.stickers},setStickersInfo:function(e,t){e.userInfo.stickers=t.stickersInfo,e.userInfo.userImage=t.userImage,console.log("state.userInfo------------",e.userInfo)},updateName:function(e,t){e.inputInfo.name=t},updateMessage:function(e,t){e.inputInfo.message=t},updateType:function(e,t){console.log(t),e.inputInfo.type=[],e.inputInfo.type=t}},actions:{init:function(e,t){return Object(E["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=e.commit,t.next=3,a.e("chunk-2d221895").then(a.bind(null,"cb88"));case 3:n=t.sent,c("init",{stickers:n.default.stickers});case 5:case"end":return t.stop()}}),t)})))()}}});Object(c["c"])(g).use(R).use(x).mount("#app")},"5b6a":function(e,t,a){"use strict";a("0f47")},"5db8":function(e,t,a){"use strict";var c=a("7a23");Object(c["x"])("data-v-94d1db82");var n={class:"sticker__ani"},r=["src"];function i(e,t,i,s,o,u){return Object(c["u"])(),Object(c["f"])("div",n,[Object(c["g"])("img",{src:a("7eb8")("./sticker-".concat(i.id,".png")),alt:"",class:"sticker__ani-img"},null,8,r)])}Object(c["v"])();var s=a("10dd"),o=(a("7a94"),{props:{id:String},setup:function(e){var t=Object(s["f"])(),a=(t.state,t.commit,t.dispatch,Object(s["d"])({})),c={};return Object(s["b"])((function(){})),{data:a,methods:c}}});a("5b6a");o.render=i,o.__scopeId="data-v-94d1db82";t["a"]=o},"5e69":function(e,t,a){e.exports=a.p+"img/sticker-0-2.803ae0f6.svg"},6572:function(e,t,a){},"6ce6":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n={class:"camera"},r=Object(c["g"])("div",{class:"camera__video-wrap"},[Object(c["g"])("video",{class:"camera__video",playsinline:"",autoplay:""})],-1),i=Object(c["h"])('<div class="camera__canvas-wrap"><div class="camera__canvas-inr"><canvas class="camera__canvas camera__canvas--image"></canvas><canvas class="camera__canvas camera__canvas--video"></canvas><div class="camera__canvas"><canvas id="c" class="camera__canvas--fabric"></canvas></div></div></div>',1),s={class:"camera__btn-wrap"},o=["disabled"],u=["disabled"],d=["disabled"],l=["disabled"],f={class:"camera__stickers-wrap"},b={class:"camera__group-stickers"},m=["onClick","disabled"],v=["src"];function p(e,t,p,g,h,_){var j=Object(c["B"])("AnimateSvg");return Object(c["u"])(),Object(c["f"])("div",n,[r,i,Object(c["g"])("div",s,[Object(c["g"])("button",{class:"camera__btn",onClick:t[0]||(t[0]=function(){var e;return g.methods.playVideo&&(e=g.methods).playVideo.apply(e,arguments)}),disabled:g.data.captureState},"camera__start",8,o),Object(c["g"])("button",{class:"camera__btn",onClick:t[1]||(t[1]=function(){var e;return g.methods.captureImage&&(e=g.methods).captureImage.apply(e,arguments)})},"captureImage"),Object(c["g"])("button",{class:"camera__btn",onClick:t[2]||(t[2]=function(){var e;return g.methods.downloadImage&&(e=g.methods).downloadImage.apply(e,arguments)})},"downloadImage"),Object(c["g"])("button",{class:"camera__btn",onClick:t[3]||(t[3]=function(){var e;return g.methods.resetCanvas&&(e=g.methods).resetCanvas.apply(e,arguments)}),disabled:!g.data.captureState},"resetCamera",8,u),Object(c["g"])("button",{class:"camera__btn",onClick:t[4]||(t[4]=function(){var e;return g.methods.removeSvg&&(e=g.methods).removeSvg.apply(e,arguments)}),disabled:g.data.captureState},"remove stickers",8,d),Object(c["g"])("button",{class:Object(c["p"])(["camera__btn",{"camera__btn--hide":1==g.data.cameraLength}]),onClick:t[5]||(t[5]=function(){var e;return g.methods.switchCamera&&(e=g.methods).switchCamera.apply(e,arguments)}),disabled:g.data.captureState},"switchCamera",10,l),Object(c["g"])("button",{class:"camera__btn",onClick:t[6]||(t[6]=function(){var e;return g.methods.sendUserInfo&&(e=g.methods).sendUserInfo.apply(e,arguments)})},"sendUserInfo")]),Object(c["g"])("div",f,[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(g.data.stickers,(function(e,n){return Object(c["u"])(),Object(c["f"])("div",{key:n,class:Object(c["p"])(["camera__group",{"camera__group--active":0==n}])},[Object(c["g"])("button",{class:"camera__group-name",onClick:t[7]||(t[7]=function(){var e;return g.methods.activeStickerG&&(e=g.methods).activeStickerG.apply(e,arguments)})},Object(c["D"])(e.group),1),Object(c["g"])("div",b,[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(e.item,(function(e,t){return Object(c["u"])(),Object(c["f"])("button",{key:t,onClick:function(t){return g.methods.addSvg(e)},disabled:g.data.captureState,class:Object(c["p"])(["camera__stickers",{"camera__stickers--animate":e.isAnimate}])},[e.isAnimate?(Object(c["u"])(),Object(c["d"])(j,{key:1,id:e.id},null,8,["id"])):(Object(c["u"])(),Object(c["f"])("img",{key:0,src:a("79b3")("./sticker-".concat(e.id,".svg")),alt:""},null,8,v))],10,m)})),128))])],2)})),128))])])}var g=a("2909"),h=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("3f53")),_=a("b130"),j=a("e9da"),O=a("a250"),k=a("9bd2"),w=a("fb3c"),C=a("dd39"),y=a("27b3"),S=a("10dd"),I=a("7a94"),x=a("a1e9"),E=a("5db8"),A={components:{AnimateSvg:E["a"]},setup:function(e){var t=Object(S["f"])(),c=t.state,n=t.commit,r=(t.dispatch,Object(S["d"])({fabricCanvas:Object(x["c"])((function(){return new I["fabric"].Canvas("c")})),stickersInfo:[],userImage:null,facingMode:!0,captureState:!1,videoState:!1,deleteState:!1,cameraLength:null,stickers:Object(x["c"])((function(){return c.stickers}))})),i={playVideo:function(){var e=document.querySelector(".camera__video-wrap").offsetWidth,t=document.querySelector(".camera__video");navigator.mediaDevices.getUserMedia({video:{width:e,height:e,facingMode:r.facingMode?"user":"environment"}}).then((function(e){t.srcObject=e,r.videoState=!0,o()})).catch((function(e){console.error("Can not get an access to a camera...",e)}))},addSvg:function(e){e.isAnimate?s(e.id,e.isAnimate):I["fabric"].loadSVGFromURL(a("79b3")("./sticker-".concat(e.id,".svg")),(function(t,a){var c=I["fabric"].util.groupSVGElements(t,a);c["stickerId"]=e.id,c["isAnimate"]=!1,r.fabricCanvas.add(c.scale(1)).setActiveObject(c).renderAll()}))},removeSvg:function(){var e;(e=r.fabricCanvas).remove.apply(e,Object(g["a"])(r.fabricCanvas.getObjects())),r.stickersInfo=[]},resetCanvas:function(){var e=document.querySelector(".camera__video-wrap").offsetWidth,t=document.querySelector(".camera__canvas--image"),a=document.querySelector(".camera__canvas--video"),c=document.querySelectorAll(".camera__canvas--fabric"),n=t.getContext("2d"),s=a.getContext("2d");i.removeSvg(),n.clearRect(0,0,e,e),s.clearRect(0,0,e,e),h["a"]({display:"inline-block"},c[1]),r.captureState=!1},captureImage:function(){var e=document.querySelector(".camera__video-wrap").offsetWidth;console.log("canvasW",e);var t=document.querySelector(".camera__canvas--image"),a=document.querySelector(".camera__canvas--video"),c=document.querySelectorAll(".camera__canvas--fabric"),n=t.getContext("2d"),i=a.getContext("2d"),s=document.querySelector(".camera__video"),o=r.fabricCanvas.getZoom();r.fabricCanvas.discardActiveObject(),r.fabricCanvas.requestRenderAll(),setTimeout((function(){n.drawImage(s,0,0,e,e),n.drawImage(c[0],0,0,e,e),i.drawImage(s,0,0,e,e),a.toBlob((function(e){var t=window.URL.createObjectURL(e);I["fabric"].Image.fromURL(t,(function(e){r.fabricCanvas.add(e.scale(1/o).center().setCoords()).renderAll().sendToBack(e)}))})),h["a"]({display:"none"},c[1]),r.captureState=!0}),10)},downloadImage:function(){var e=document.querySelector(".camera__canvas--image"),t=document.createElement("a");t.setAttribute("download","capture-".concat((new Date).getTime(),".png")),e.toBlob((function(e){var a=window.URL.createObjectURL(e);t.setAttribute("href",a),t.click(),window.URL.revokeObjectURL(a)}))},sendUserInfo:function(){var e=document.querySelector(".camera__video-wrap").offsetWidth,t=r.fabricCanvas.getObjects(),a=r.fabricCanvas.getZoom();C["a"](t,y["a"]((function(t){var c={id:t.stickerId,width:100*t.width*a/e,height:100*t.height*a/e,left:100*t.left*a/e,top:100*t.top*a/e,scaleX:t.scaleX,scaleY:t.scaleY,angle:t.angle,isAnimate:t.isAnimate};void 0!==c.id&&r.stickersInfo.push(c)}))),n("setStickersInfo",{stickersInfo:r.stickersInfo,userImage:r.userImage})},switchCamera:function(){r.facingMode=!r.facingMode,i.playVideo()},activeStickerG:function(e){C["a"](_["a"](".camera__group"),y["a"]((function(e){j["a"]("camera__group--active",e)&&O["a"]("camera__group--active",e)}))),k["a"]("camera__group--active",w["a"](".camera__group",e.target))}},s=function(e,t){I["fabric"].Sprite=I["fabric"].util.createClass(I["fabric"].Image,{type:"sprite",spriteWidth:50,spriteHeight:72,spriteIndex:0,frameTime:100,initialize:function(e,t){t||(t={}),t.width=this.spriteWidth,t.height=this.spriteHeight,this.callSuper("initialize",e,t),this.createTmpCanvas(),this.createSpriteImages()},createTmpCanvas:function(){this.tmpCanvasEl=I["fabric"].util.createCanvasElement(),this.tmpCanvasEl.width=this.spriteWidth||this.width,this.tmpCanvasEl.height=this.spriteHeight||this.height},createSpriteImages:function(){this.spriteImages=[];for(var e=this._element.width/this.spriteWidth,t=0;t<e;t++)this.createSpriteImage(t)},createSpriteImage:function(e){var t=this.tmpCanvasEl.getContext("2d");t.clearRect(0,0,this.tmpCanvasEl.width,this.tmpCanvasEl.height),t.drawImage(this._element,-e*this.spriteWidth,0);var a=this.tmpCanvasEl.toDataURL("image/png"),c=I["fabric"].util.createImage();c.src=a,this.spriteImages.push(c)},_render:function(e){e.drawImage(this.spriteImages[this.spriteIndex],-this.width/2,-this.height/2)},play:function(){var e=this;this.animInterval=setInterval((function(){e.onPlay&&e.onPlay(),e.dirty=!0,e.spriteIndex++,e.spriteIndex===e.spriteImages.length&&(e.spriteIndex=0)}),this.frameTime)},stop:function(){clearInterval(this.animInterval)}}),I["fabric"].Sprite.fromURL=function(e,t,a){I["fabric"].util.loadImage(e,(function(e){t(new I["fabric"].Sprite(e,a))}))},I["fabric"].Sprite.async=!0,I["fabric"].Sprite.fromURL(a("7eb8")("./sticker-".concat(e,".png")),(function(a){a["stickerId"]=e,a["isAnimate"]=t,r.fabricCanvas.add(a),a.set("dirty",!0),a.play()})),function e(){r.fabricCanvas.renderAll(),I["fabric"].util.requestAnimFrame(e)}()},o=function(){navigator.mediaDevices.enumerateDevices().then((function(e){var t=[];C["a"](e,y["a"]((function(e){"videoinput"===e.kind&&t.push(e)}))),r.cameraLength=t.length})).catch((function(e){console.log("error",e)}))},u=function(){var e=I["fabric"].Object.prototype,t=document.createElement("img"),c=a("f687");function n(e,t){r.deleteState=!0;var a=t.target,c=a.canvas;console.log("transform",t),console.log("target",a),a._objects?(C["a"](a._objects,y["a"]((function(e){return c.remove(e)}))),r.fabricCanvas.discardActiveObject()):c.remove(a),c.requestRenderAll()}function i(e,a,c,n,r){var i=this.cornerSize;e.save(),e.translate(a,c),e.rotate(I["fabric"].util.degreesToRadians(r.angle)),e.drawImage(t,-i/2,-i/2,i,i),e.restore()}t.src=c,e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1}),e.transparentCorners=!1,e.controls.deleteControl=new I["fabric"].Control({x:.5,y:-.5,offsetY:16,cursorStyle:"pointer",mouseUpHandler:n,render:i,cornerSize:24})},d=function(){var e=document.querySelector(".camera__video-wrap").offsetWidth;if(!r.captureState){var t=document.querySelector(".camera__canvas--image"),a=document.querySelector(".camera__canvas--video");t.setAttribute("width",e),t.setAttribute("height",e),a.setAttribute("width",e),a.setAttribute("height",e)}var c=e/r.fabricCanvas.getWidth(),n=r.fabricCanvas.getZoom()*c;r.fabricCanvas.setDimensions({width:e,height:e}),r.fabricCanvas.setViewportTransform([n,0,0,n,0,0])},l=function(){d()},f=function(){r.fabricCanvas.on("mouse:up",(function(e){if(e.target)return r.deleteState?r.deleteState=!1:void r.fabricCanvas.bringToFront(e.target)}))};return Object(S["b"])((function(){i.playVideo(),f(),d(),u(),window.addEventListener("resize",l)})),Object(S["c"])((function(){window.removeEventListener("resize",l)})),{data:r,methods:i}}};a("164e");A.render=p;t["default"]=A},"78fe":function(e,t,a){e.exports=a.p+"img/sticker-0-7.9a7bedb5.svg"},"79b3":function(e,t,a){var c={"./sticker-0-0.svg":"d50a","./sticker-0-1.svg":"273b","./sticker-0-2.svg":"5e69","./sticker-0-4.svg":"06da","./sticker-0-5.svg":"b803","./sticker-0-6.svg":"b595","./sticker-0-7.svg":"78fe","./sticker-0-8.svg":"9ddd","./sticker-1-0.svg":"3541","./sticker-1-1.svg":"9f44","./sticker-1-2.svg":"dae6","./sticker-2-0.svg":"8ad5","./sticker-2-1.svg":"2aad","./sticker-2-2.svg":"c15c"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}n.keys=function(){return Object.keys(c)},n.resolve=r,e.exports=n,n.id="79b3"},"7eb8":function(e,t,a){var c={"./sticker-0-3.png":"0a40"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}n.keys=function(){return Object.keys(c)},n.resolve=r,e.exports=n,n.id="7eb8"},"8ad5":function(e,t,a){e.exports=a.p+"img/sticker-2-0.1082752a.svg"},"9ddd":function(e,t,a){e.exports=a.p+"img/sticker-0-8.35f27cd4.svg"},"9f44":function(e,t,a){e.exports=a.p+"img/sticker-1-1.2c3aa81e.svg"},b595:function(e,t,a){e.exports=a.p+"img/sticker-0-6.6dd5c5e7.svg"},b803:function(e,t,a){e.exports=a.p+"img/sticker-0-5.7f70b589.svg"},c15c:function(e,t,a){e.exports=a.p+"img/sticker-2-2.24cf58f9.svg"},cd82:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n=a("2b18"),r=a.n(n),i={class:"button-wrap"},s=Object(c["g"])("div",{class:"capture"},[Object(c["g"])("div",{class:"capture__video-wrap"},[Object(c["g"])("div",{class:"capture__video"},[Object(c["g"])("video",{class:"capture__player",autoplay:""}),Object(c["g"])("img",{class:"capture__img",src:r.a,alt:""})]),Object(c["g"])("button",{class:"capture__btn",title:"Take a picture"})]),Object(c["g"])("div",{class:"capture__canvas-wrap"},[Object(c["g"])("canvas",{id:"c",class:"capture__canvas",style:{border:"1px solid #ccc"}})]),Object(c["g"])("canvas",{class:"capture__output",width:"597",height:"597"})],-1);function o(e,t,a,n,r,o){return Object(c["u"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("div",i,[Object(c["g"])("button",{class:"button",onClick:t[0]||(t[0]=function(){var e;return n.methods.addSvg&&(e=n.methods).addSvg.apply(e,arguments)})},"add svg")]),s],64)}a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d");var u=a("10dd"),d=a("7a94"),l=a("a1e9"),f={setup:function(){var e,t=Object(u["d"])({fabricCanvas:Object(l["c"])((function(){return new d["fabric"].Canvas("c")})),canvasSize:""}),c={add:function(){var e=new d["fabric"].Rect({left:100,top:50,fill:"yellow",width:200,height:100,objectCaching:!1,stroke:"lightgreen",strokeWidth:4});t.fabricCanvas.add(e),t.fabricCanvas.setActiveObject(e)},addSvg:function(){console.log("addSvg ---------------"),d["fabric"].loadSVGFromURL(a("273b"),(function(e,a){var c=d["fabric"].util.groupSVGElements(e,a);t.fabricCanvas.add(c.scale(1)),t.fabricCanvas.renderAll()}))}},n=function(){var a="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",c=document.createElement("img");function n(){e=new d["fabric"].Rect({left:100,top:50,fill:"yellow",width:200,height:100,objectCaching:!1,stroke:"lightgreen",strokeWidth:4}),t.fabricCanvas.add(e)}function r(e,t){var a=t.target,c=a.canvas;c.remove(a),c.requestRenderAll()}function i(e,t,a,n,r){var i=this.cornerSize;e.save(),e.translate(t,a),e.rotate(d["fabric"].util.degreesToRadians(r.angle)),e.drawImage(c,-i/2,-i/2,i,i),e.restore()}c.src=a,d["fabric"].Object.prototype.transparentCorners=!1,d["fabric"].Object.prototype.cornerColor="blue",d["fabric"].Object.prototype.cornerStyle="circle",d["fabric"].Object.prototype.controls.deleteControl=new d["fabric"].Control({x:.5,y:-.5,offsetY:16,cursorStyle:"pointer",mouseUpHandler:r,render:i,cornerSize:24}),console.log("fabric.Object.prototype.controls",d["fabric"].Object.prototype),n()},r=function(){var e=document.getElementsByClassName("capture__player")[0],a=document.getElementsByClassName("capture__btn")[0],c=document.getElementsByClassName("capture__output")[0],n=document.getElementsByClassName("capture__canvas")[0];console.log("outputCanvas",c);n.getContext("2d");var r=c.getContext("2d");navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e.srcObject=t,console.log("stream ----")})).catch((function(e){console.error("Can not get an access to a camera...",e)})),a.addEventListener("click",(function(){e.offsetWidth,e.offsetHeight;r.drawImage(e,0,0,200,100),r.drawImage(n,0,0,300,150),console.log("data.fabricCanvas",t.fabricCanvas),console.log("fabric",d["fabric"]);var a=document.createElement("a");a.setAttribute("download","capture-".concat((new Date).getTime(),".png")),c.toBlob((function(e){var t=window.URL.createObjectURL(e);a.setAttribute("href",t),a.click(),window.URL.revokeObjectURL(t)}))}))};return Object(u["b"])((function(){var e=document.querySelector(".capture__video-wrap").offsetWidth;t.fabricCanvas.setDimensions({width:e,height:e}),n(),r()})),{data:t,methods:c}}};a("1bef");f.render=o;t["default"]=f},d50a:function(e,t,a){e.exports=a.p+"img/sticker-0-0.c8005bd0.svg"},dae6:function(e,t,a){e.exports=a.p+"img/sticker-1-2.b28c90ff.svg"},e4f9:function(e,t,a){},f687:function(e,t,a){e.exports=a.p+"img/cancel.c6ba33cc.svg"}}]);
//# sourceMappingURL=chunk-common.3a7a4118.js.map